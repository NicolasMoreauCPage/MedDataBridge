{% extends "sqladmin/layout.html" %}

{% block title %}Détails - {{ model_view.name }} - {{ admin.title }}{% endblock %}

{% block content %}
<div class="max-w-4xl">
    <!-- Header -->
    <div class="mb-6">
        <a href="{{ admin.get_admin_url() }}/{{ model_view.identity }}/list" 
           class="inline-flex items-center text-sm text-blue-600 hover:text-blue-800 mb-4 transition">
            <i class="fas fa-arrow-left mr-2"></i>Retour à la liste
        </a>
        <h1 class="text-2xl font-bold text-slate-900">Détails - {{ model_view.name }}</h1>
    </div>

    <!-- Details Card -->
    <div class="bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden">
        <div class="divide-y divide-slate-200">
            {% for column, value in details.items() %}
            <div class="grid grid-cols-3 gap-4 px-6 py-4 hover:bg-slate-50 transition">
                <div class="font-medium text-slate-700">
                    {{ column }}
                </div>
                <div class="col-span-2 text-slate-900">
                    {% if value is none %}
                    <span class="text-slate-400 italic">Non défini</span>
                    {% elif value is sameas true %}
                    <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800">
                        <i class="fas fa-check mr-1"></i>Oui
                    </span>
                    {% elif value is sameas false %}
                    <span class="inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800">
                        <i class="fas fa-times mr-1"></i>Non
                    </span>
                    {% else %}
                    {{ value }}
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Actions -->
    <div class="mt-6 flex items-center gap-3">
        {% if model_view.can_edit %}
        <a href="{{ admin.get_admin_url() }}/{{ model_view.identity }}/edit/{{ item_id }}" 
           class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
            <i class="fas fa-edit"></i>
            <span>Modifier</span>
        </a>
        {% endif %}
        
        {% if model_view.can_delete %}
        <button onclick="deleteItem()"
                class="inline-flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition">
            <i class="fas fa-trash"></i>
            <span>Supprimer</span>
        </button>
        {% endif %}
    </div>
</div>

{% block tail_js %}
<script>
    function deleteItem() {
        if (confirm('Êtes-vous sûr de vouloir supprimer cet enregistrement ?')) {
            fetch(`{{ admin.get_admin_url() }}/{{ model_view.identity }}/delete/{{ item_id }}`, {
                method: 'DELETE'
            }).then(response => {
                if (response.ok) {
                    window.location.href = '{{ admin.get_admin_url() }}/{{ model_view.identity }}/list';
                }
            });
        }
    }
</script>
{% endblock %}
{% endblock %}
